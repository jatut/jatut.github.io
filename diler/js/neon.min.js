Object.getOwnPropertyNames(Math).map(function(t){window[t]=Math[t]});var HEX_CRAD=64,HEX_BG="#171717",HEX_HL="#2a2a2a",HEX_HLW=2,HEX_GAP=4,NEON_PALETE=["#cb3301","#ff0066","#ff6666","#feff99","#ffff67","#ccff66","#99fe00","#fe99ff","#ff99cb","#fe349a","#cc99fe","#6599ff","#00ccff","#ffffff"],T_SWITCH=128;unit_x=3*HEX_CRAD+HEX_GAP*sqrt(3),unit_y=HEX_CRAD*sqrt(3)*.5+.5*HEX_GAP,off_x=1.5*HEX_CRAD+HEX_GAP*sqrt(3)*.5,wp=NEON_PALETE.map(function(t){var e=parseInt(t.replace("#",""),16);return{r:e>>16&255,g:e>>8&255,b:255&e}}),nwp=wp.length,csi=0,f=1/T_SWITCH,c=document.querySelectorAll("canvas"),n=c.length,w,h,_min,ctx=[],grid,source=null,t=0,request_id=null;var flag=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],GridItem=function(t,e){this.x=t||0,this.y=e||0,this.points={hex:[],hl:[]},this.init=function(){for(var t,e,i,s=PI/3,o=HEX_CRAD-.5*HEX_HLW,n=0;6>n;n++)i=n*s,t=this.x+HEX_CRAD*cos(i),e=this.y+HEX_CRAD*sin(i),this.points.hex.push({x:t,y:e}),n>2&&(t=this.x+o*cos(i),e=this.y+o*sin(i),this.points.hl.push({x:t,y:e}))},this.draw=function(t){for(var e=0;6>e;e++)t[(0===e?"move":"line")+"To"](this.points.hex[e].x,this.points.hex[e].y)},this.highlight=function(t){for(var e=0;3>e;e++)t[(0===e?"move":"line")+"To"](this.points.hl[e].x,this.points.hl[e].y)},this.init()},Grid=function(t,e){this.cols=e||16,this.rows=t||16,this.items=[],this.n=this.items.length,this.init=function(){for(var t,e,i=0;i<this.rows;i++){e=i*unit_y;for(var s=0;s<this.cols;s++)t=(i%2==0?0:off_x)+s*unit_x,this.items.push(new GridItem(t,e))}this.n=this.items.length},this.draw=function(t){t.fillStyle=HEX_BG,t.beginPath();for(var e=0;e<this.n;e++)this.items[e].draw(t);t.closePath(),t.fill(),t.strokeStyle=HEX_HL,t.beginPath();for(var e=0;e<this.n;e++)this.items[e].highlight(t);t.closePath(),t.stroke()},this.init()},init=function(){var e,i,t=getComputedStyle(c[0]);w=~~t.width.split("px")[0],h=~~t.height.split("px")[0],_min=.75*min(w,h),e=~~(h/unit_y)+2,i=~~(w/unit_x)+2;for(var s=0;s<n;s++)c[s].width=w,c[s].height=h,ctx[s]=c[s].getContext("2d");grid=new Grid(e,i),grid.draw(ctx[1]),source||(source={x:~~(w/2),y:~~(h/2)}),neon()},flag=function(){var t=c(1).getContext("2d"),e=new Image;e.src="image/1.png",t.drawImage(e,source.x,source.y),request_id=requestAnimationFrame(flag)},neon=function(){var n,e=t%T_SWITCH*f,i={r:~~(wp[csi].r*(1-e)+wp[(csi+1)%nwp].r*e),g:~~(wp[csi].g*(1-e)+wp[(csi+1)%nwp].g*e),b:~~(wp[csi].b*(1-e)+wp[(csi+1)%nwp].b*e)},s="rgb("+i.r+","+i.g+","+i.b+")",o=ctx[0].createRadialGradient(source.x,source.y,0,source.x,source.y,.875*_min);n=.5-.5*sin(7*t*f)*cos(5*t*f)*sin(3*t*f),o.addColorStop(0,s),o.addColorStop(n,"rgba(0,0,0,.03)"),fillBackground("rgba(0,0,0,.02)"),fillBackground(o),t++,t%T_SWITCH===0&&(csi++,csi===nwp&&(csi=0,t=0)),request_id=requestAnimationFrame(neon)},fillBackground=function(t){ctx[0].fillStyle=t,ctx[0].beginPath(),ctx[0].rect(0,0,w,h),ctx[0].closePath(),ctx[0].fill()};init(),addEventListener("resize",init,!1),addEventListener("mousemove",function(t){source={x:t.clientX,y:t.clientY}},!1);
